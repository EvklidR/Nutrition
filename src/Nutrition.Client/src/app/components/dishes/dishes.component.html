<div class="dish-list">
  <div class="header-buttons">
    <button class="switch-button ingr-btn" (click)="navigateToProducts()">–ü—Ä–æ–¥—É–∫—Ç—ã</button>
    <button class="switch-button active">–ë–ª—é–¥–∞</button>
  </div>

  <input type="text" class="filter-input" placeholder="–ü–æ–∏—Å–∫ –±–ª—é–¥..." [(ngModel)]="params.name" (ngModelChange)="loadDishes()" />

  <div class="controls">
    <div class="sorting">
      <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
      <select [(ngModel)]="params.sortingCriteria" (change)="loadDishes()">
        <option [ngValue]="null">–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
        <option [ngValue]="0">–ö–∞–ª–æ—Ä–∏–∏</option>
        <option [ngValue]="1">–ë–µ–ª–∫–∏</option>
        <option [ngValue]="2">–ñ–∏—Ä—ã</option>
        <option [ngValue]="3">–£–≥–ª–µ–≤–æ–¥—ã</option>
      </select>

      <label>
        <input type="checkbox" [(ngModel)]="params.sortAsc" (change)="loadDishes()"> –ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
      </label>
    </div>

    <div class="pagination">
      <label>–°—Ç—Ä–∞–Ω–∏—Ü–∞:</label>
      <button (click)="changePage(-1)" [disabled]="params.page === 1">‚Üê</button>
      <span>{{ params.page || 1 }} / {{ totalPages() }}</span>
      <button (click)="changePage(1)" [disabled]="!hasNextPage">‚Üí</button>
    </div>
  </div>


  <button class="add-button" (click)="openAddDishModal()">–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</button>

  <div *ngIf="isLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  <div *ngIf="!isLoading && dishes.length === 0" class="no-data">
    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–ª—é–¥.</p>
  </div>

  <div class="dishes-container" *ngIf="!isLoading && dishes.length > 0">
    <div class="dish-card"
         *ngFor="let dish of dishes"
         (click)="openDatailsModal(dish.id)"
         [style.backgroundImage]="dishImages[dish.id] ? 'url(' + dishImages[dish.id] + ')' : ''"
         [style.backgroundSize]="'cover'"
         [class.bg-img]="dishImages[dish.id] != null">
      <div class="dish-header">
        <h3>{{ dish.name }}</h3>
        <button class="delete-button" (click)="deleteDish(dish.id); $event.stopPropagation()">üóëÔ∏è</button>
      </div>
      <p>–ö–∞–ª–æ—Ä–∏–∏: {{ dish.calories | number:'1.1-1' }} –∫–∫–∞–ª</p>
      <p>–ë–µ–ª–∫–∏: {{ dish.proteins | number:'1.1-1' }} –≥</p>
      <p>–ñ–∏—Ä—ã: {{ dish.fats | number:'1.1-1' }} –≥</p>
      <p>–£–≥–ª–µ–≤–æ–¥—ã: {{ dish.carbohydrates | number:'1.1-1' }} –≥</p>
    </div>
  </div>
</div>
